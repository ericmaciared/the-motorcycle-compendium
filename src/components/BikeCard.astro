---
interface Props {
  bike: {
    id: string;
    slug: string;
    variant_name: string;
    year: number;
    price_usd: number | null;
    engine_displacement_cc: number | null;
    horsepower_hp: number | null;
    description: string | null;
    model_name: string;
    manufacturer_name: string;
    category: string | null;
  };
}

const { bike } = Astro.props;
---

<div class="group bg-topo-50 elevation-2 overflow-hidden hover:elevation-3 transition-all duration-300 relative">
  <!-- Topographic contour line decoration -->
  <div class="absolute inset-0 bg-flow-field opacity-20 pointer-events-none"></div>

  <!-- Placeholder Image with topographic styling -->
  <div class="relative h-56 bg-gradient-to-br from-topo-700 via-topo-800 to-topo-900 flex items-center justify-center overflow-hidden">
    <!-- Subtle grid pattern overlay -->
    <div class="absolute inset-0 opacity-10">
      <div class="w-full h-full" style="background-image: repeating-linear-gradient(0deg, transparent, transparent 19px, rgba(255,255,255,0.1) 19px, rgba(255,255,255,0.1) 20px), repeating-linear-gradient(90deg, transparent, transparent 19px, rgba(255,255,255,0.1) 19px, rgba(255,255,255,0.1) 20px);"></div>
    </div>
    <span class="text-white text-7xl transform group-hover:scale-105 transition-transform duration-300 relative z-10">üèçÔ∏è</span>

    {bike.category && (
      <span class="absolute top-3 right-3 text-xs font-bold bg-signal-blue text-black px-2.5 py-1 uppercase tracking-wider elevation-1">
        {bike.category}
      </span>
    )}
  </div>

  <!-- Content with clean spacing -->
  <div class="p-6 relative bg-topo-50">
    <!-- Manufacturer - small, high contrast -->
    <div class="mb-2 flex items-center gap-2">
      <span class="signal-dot bg-signal-blue"></span>
      <span class="text-xs font-bold text-topo-700 uppercase tracking-widest">{bike.manufacturer_name}</span>
    </div>

    <!-- Model Name - Large, design studio style -->
    <h3 class="text-2xl font-bold text-topo-900 mb-1 tracking-tight leading-tight">
      {bike.model_name}
    </h3>

    <!-- Variant Name -->
    <p class="text-sm text-topo-600 mb-5 font-medium">{bike.variant_name} <span class="text-topo-400">({bike.year})</span></p>

    <!-- Specs - Data-dense, map-like presentation -->
    <div class="grid grid-cols-2 gap-3 mb-5">
      {bike.engine_displacement_cc && (
        <div class="bg-topo-100 p-3 relative overflow-hidden">
          <!-- Small decorative corner element -->
          <div class="absolute top-0 right-0 w-2 h-2 border-t-2 border-r-2 border-signal-amber opacity-40"></div>
          <div class="text-xs text-topo-700 uppercase tracking-wide mb-1 font-medium">Engine</div>
          <div class="metric-value text-topo-900 text-lg">{bike.engine_displacement_cc}<span class="text-sm text-topo-600 font-normal">cc</span></div>
        </div>
      )}
      {bike.horsepower_hp && (
        <div class="bg-topo-100 p-3 relative overflow-hidden">
          <!-- Small decorative corner element -->
          <div class="absolute top-0 right-0 w-2 h-2 border-t-2 border-r-2 border-signal-green opacity-40"></div>
          <div class="text-xs text-topo-700 uppercase tracking-wide mb-1 font-medium">Power</div>
          <div class="metric-value text-topo-900 text-lg">{bike.horsepower_hp}<span class="text-sm text-topo-600 font-normal">hp</span></div>
        </div>
      )}
    </div>

    <!-- Price - Big, important -->
    {bike.price_usd && (
      <div class="mb-5 pb-5 isobar">
        <span class="text-3xl font-extrabold text-topo-900 metric-value">
          ‚Ç¨{bike.price_usd.toLocaleString()}
        </span>
        <span class="text-topo-700 text-sm ml-1 font-semibold uppercase tracking-wider">EUR</span>
      </div>
    )}

    <a
      href={`/bikes/${bike.slug}`}
      class="block w-full bg-topo-900 text-topo-50 text-center py-3.5 hover:bg-signal-blue transition-all duration-200 font-bold uppercase tracking-wider text-sm elevation-1 hover:elevation-2"
    >
      View Details
      <span class="ml-2">‚Üí</span>
    </a>
  </div>
</div>